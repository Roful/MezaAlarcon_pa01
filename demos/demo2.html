<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<LINK href="diff.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="nav.js"></script>
</head>
<body>
<pre>
<div class="line" id="L1"><span class="lineno">1 </span>##################################################################</div>
<div class="line" id="L2"><span class="lineno">2 </span># Demo for an AST-based diffing tool</div>
<div class="line" id="L3"><span class="lineno">3 </span># author: Yin Wang (yinwang0@gmail.com)</div>
<div class="line" id="L4"><span class="lineno">4 </span>##################################################################</div>
<div class="line" id="L5"><span class="lineno">5 </span></div>
<div class="line" id="L6"><span class="lineno">6 </span>##################################################################</div>
<div class="line" id="L7"><span class="lineno">7 </span># Features:</div>
<div class="line" id="L8"><span class="lineno">8 </span># - Detect insertion, deletion and modification of code</div>
<div class="line" id="L9"><span class="lineno">9 </span># - Detect refactoring (renamed or moved code)</div>
<div class="line" id="L10"><span class="lineno">10 </span># - Assess similarity of code</div>
<div class="line" id="L11"><span class="lineno">11 </span># - Ignore comments and whitespaces</div>
<div class="line" id="L12"><span class="lineno">12 </span>#</div>
<div class="line" id="L13"><span class="lineno">13 </span>###################################################################</div>
<div class="line" id="L14"><span class="lineno">14 </span># Usage:</div>
<div class="line" id="L15"><span class="lineno">15 </span>#</div>
<div class="line" id="L16"><span class="lineno">16 </span># - Mouseover any framed elements to show information</div>
<div class="line" id="L17"><span class="lineno">17 </span>#</div>
<div class="line" id="L18"><span class="lineno">18 </span># - Click on Blue or White elements to match the other side.</div>
<div class="line" id="L19"><span class="lineno">19 </span>#   Once matched, the two sides will be locked into that</div>
<div class="line" id="L20"><span class="lineno">20 </span>#   position until next match.</div>
<div class="line" id="L21"><span class="lineno">21 </span>#</div>
<div class="line" id="L22"><span class="lineno">22 </span>####################################################################</div>
<div class="line" id="L23"><span class="lineno">23 </span># Legend of colors:</div>
<div class="line" id="L24"><span class="lineno">24 </span>#</div>
<div class="line" id="L25"><span class="lineno">25 </span># - Red   : deleted</div>
<div class="line" id="L26"><span class="lineno">26 </span># - Green : inserted</div>
<div class="line" id="L27"><span class="lineno">27 </span># - Blue  : modified (mouse over to show percentage of change)</div>
<div class="line" id="L28"><span class="lineno">28 </span># - White : unchanged or moved</div>
<div class="line" id="L29"><span class="lineno">29 </span>#</div>
<div class="line" id="L30"><span class="lineno">30 </span>###################################################################</div>
<div class="line" id="L31"><span class="lineno">31 </span></div>
<div class="line" id="L32"><span class="lineno">32 </span></div>
<div class="line" id="L33"><span class="lineno">33 </span></div>
<div class="line" id="L34"><span class="lineno">34 </span></div>
<div class="line" id="L35"><span class="lineno">35 </span></div>
<div class="line" id="L36"><span class="lineno">36 </span><span class="insertion" title="class &#39;PairIterator&#39; (line 36) inserted"><span class="keyword">class</span></span> PairIterator:</div>
<div class="line" id="L37"><span class="lineno">37 </span>    <span class="keyword">def</span> __init__(self, p):</div>
<div class="line" id="L38"><span class="lineno">38 </span>        self.p = p</div>
<div class="line" id="L39"><span class="lineno">39 </span>    <span class="keyword">def</span> next(self):</div>
<div class="line" id="L40"><span class="lineno">40 </span>        <span class="keyword">if</span> self.p == nil:</div>
<div class="line" id="L41"><span class="lineno">41 </span>            raise StopIteration</div>
<div class="line" id="L42"><span class="lineno">42 </span>        ret = self.p.fst</div>
<div class="line" id="L43"><span class="lineno">43 </span>        self.p = self.p.snd</div>
<div class="line" id="L44"><span class="lineno">44 </span>        <span class="keyword">return</span> ret</div>
<div class="line" id="L45"><span class="lineno">45 </span></div>
<div class="line" id="L46"><span class="lineno">46 </span></div>
<div class="line" id="L47"><span class="lineno">47 </span></div>
<div class="line" id="L48"><span class="lineno">48 </span></div>
<div class="line" id="L49"><span class="lineno">49 </span><a id="61"  class="change"  title="class &#39;Nil&#39; (line 35) changed to class &#39;Nil&#39; (line 49) (similarity 63.8%)" onclick="highlight('61','60','L49','L35')"><span class="keyword">class</a></span> <a id="59"  class="move"  title="&#39;Nil&#39; (line 35) moved to &#39;Nil&#39; (line 49) (unchanged)" onclick="highlight('59','58','L49','L35')">Nil</a>:</div>
<div class="line" id="L50"><span class="lineno">50 </span>    <a id="57"  class="change"  title="function &#39;__repr__&#39; (line 36) changed to function &#39;__repr__&#39; (line 50) (similarity 89.3%)" onclick="highlight('57','56','L50','L36')"><span class="keyword">def</a></span> <a id="55"  class="move"  title="&#39;__repr__&#39; (line 36) moved to &#39;__repr__&#39; (line 50) (unchanged)" onclick="highlight('55','54','L50','L36')">__repr__</a>(<a id="51"  class="change"  title="&#39;this&#39; (line 36) renamed to &#39;self&#39; (line 50) (similarity 25.0%)" onclick="highlight('51','50','L50','L36')">self</a>):</div>
<div class="line" id="L51"><span class="lineno">51 </span>        <span class="keyword">return</span> <a id="53"  class="move"  title="string &#39;()&#39; (line 37) moved to string &#39;()&#39; (line 51) (unchanged)" onclick="highlight('53','52','L51','L37')">&quot;()&quot;</a></div>
<div class="line" id="L52"><span class="lineno">52 </span>    <span class="insertion" title="function &#39;__iter__&#39; (line 52) inserted"><span class="keyword">def</span></span> __iter__(self):</div>
<div class="line" id="L53"><span class="lineno">53 </span>        <span class="keyword">return</span> PairIterator(self)</div>
<div class="line" id="L54"><span class="lineno">54 </span></div>
<div class="line" id="L55"><span class="lineno">55 </span><a id="63"  class="move"  title="&#39;nil&#39; (line 39) moved to &#39;nil&#39; (line 55) (unchanged)" onclick="highlight('63','62','L55','L39')">nil</a> = <a id="65"  class="move"  title="&#39;Nil&#39; (line 39) moved to &#39;Nil&#39; (line 55) (unchanged)" onclick="highlight('65','64','L55','L39')">Nil</a>()            # singleton instance of Nil</div>
<div class="line" id="L56"><span class="lineno">56 </span></div>
<div class="line" id="L57"><span class="lineno">57 </span></div>
<div class="line" id="L58"><span class="lineno">58 </span></div>
<div class="line" id="L59"><span class="lineno">59 </span></div>
<div class="line" id="L60"><span class="lineno">60 </span><a id="169"  class="change"  title="class &#39;Cons&#39; (line 43) renamed to class &#39;Pair&#39; (line 60) (similarity 85.7%)" onclick="highlight('169','168','L60','L43')"><span class="keyword">class</a></span> <a id="167"  class="change"  title="&#39;Cons&#39; (line 43) renamed to &#39;Pair&#39; (line 60) (similarity 0.0%)" onclick="highlight('167','166','L60','L43')">Pair</a>:</div>
<div class="line" id="L61"><span class="lineno">61 </span>    <a id="83"  class="change"  title="function &#39;__init__&#39; (line 44) changed to function &#39;__init__&#39; (line 61) (similarity 77.8%)" onclick="highlight('83','82','L61','L44')"><span class="keyword">def</a></span> <a id="81"  class="move"  title="&#39;__init__&#39; (line 44) moved to &#39;__init__&#39; (line 61) (unchanged)" onclick="highlight('81','80','L61','L44')">__init__</a>(<a id="71"  class="change"  title="&#39;this&#39; (line 44) renamed to &#39;self&#39; (line 61) (similarity 25.0%)" onclick="highlight('71','70','L61','L44')">self</a>, <a id="69"  class="change"  title="&#39;first&#39; (line 44) renamed to &#39;fst&#39; (line 61) (similarity 75.0%)" onclick="highlight('69','68','L61','L44')">fst</a>, <a id="67"  class="change"  title="&#39;rest&#39; (line 44) renamed to &#39;snd&#39; (line 61) (similarity 28.6%)" onclick="highlight('67','66','L61','L44')">snd</a>):</div>
<div class="line" id="L62"><span class="lineno">62 </span>            <a id="73"  class="change"  title="&#39;&#39;this&#39;.&#39;first&#39;&#39; (line 45) changed to &#39;&#39;self&#39;.&#39;fst&#39;&#39; (line 62) (similarity 85.2%)" onclick="highlight('73','72','L62','L45')">self.fst</a> = <a id="75"  class="change"  title="&#39;first&#39; (line 45) renamed to &#39;fst&#39; (line 62) (similarity 75.0%)" onclick="highlight('75','74','L62','L45')">fst</a></div>
<div class="line" id="L63"><span class="lineno">63 </span>            <a id="77"  class="change"  title="&#39;&#39;this&#39;.&#39;rest&#39;&#39; (line 46) changed to &#39;&#39;self&#39;.&#39;snd&#39;&#39; (line 63) (similarity 78.4%)" onclick="highlight('77','76','L63','L46')">self.snd</a> = <a id="79"  class="change"  title="&#39;rest&#39; (line 46) renamed to &#39;snd&#39; (line 63) (similarity 28.6%)" onclick="highlight('79','78','L63','L46')">snd</a></div>
<div class="line" id="L64"><span class="lineno">64 </span>    <a id="165"  class="change"  title="function &#39;__repr__&#39; (line 47) changed to function &#39;__repr__&#39; (line 64) (similarity 93.0%)" onclick="highlight('165','164','L64','L47')"><span class="keyword">def</a></span> <a id="163"  class="move"  title="&#39;__repr__&#39; (line 47) moved to &#39;__repr__&#39; (line 64) (unchanged)" onclick="highlight('163','162','L64','L47')">__repr__</a>(<a id="85"  class="change"  title="&#39;this&#39; (line 47) renamed to &#39;self&#39; (line 64) (similarity 25.0%)" onclick="highlight('85','84','L64','L47')">self</a>):</div>
<div class="line" id="L65"><span class="lineno">65 </span>        <span class="keyword">if</span> (<a id="91"  class="change"  title="&#39;&#39;this&#39;.&#39;rest&#39;&#39; (line 48) changed to &#39;&#39;self&#39;.&#39;snd&#39;&#39; (line 65) (similarity 78.4%)" onclick="highlight('91','90','L65','L48')">self.snd</a> <a id="87"  class="move"  title="&#39;==&#39; (line 48) moved to &#39;==&#39; (line 65) (unchanged)" onclick="highlight('87','86','L65','L48')">==</a> <a id="89"  class="move"  title="&#39;nil&#39; (line 48) moved to &#39;nil&#39; (line 65) (unchanged)" onclick="highlight('89','88','L65','L48')">nil</a>):</div>
<div class="line" id="L66"><span class="lineno">66 </span>            <span class="keyword">return</span> <a id="97"  class="move"  title="string &#39;(&#39; (line 49) moved to string &#39;(&#39; (line 66) (unchanged)" onclick="highlight('97','96','L66','L49')">&quot;(&quot;</a> <a id="103"  class="move"  title="&#39;+&#39; (line 49) moved to &#39;+&#39; (line 66) (unchanged)" onclick="highlight('103','102','L66','L49')">+</a> <a id="101"  class="move"  title="&#39;repr&#39; (line 49) moved to &#39;repr&#39; (line 66) (unchanged)" onclick="highlight('101','100','L66','L49')">repr</a>(<a id="99"  class="change"  title="&#39;&#39;this&#39;.&#39;first&#39;&#39; (line 49) changed to &#39;&#39;self&#39;.&#39;fst&#39;&#39; (line 66) (similarity 85.2%)" onclick="highlight('99','98','L66','L49')">self.fst</a>) <a id="93"  class="move"  title="&#39;+&#39; (line 49) moved to &#39;+&#39; (line 66) (unchanged)" onclick="high